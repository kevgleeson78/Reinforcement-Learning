<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="../static/javascript/loading.js"></script>
    <link rel="stylesheet" href="../static/css/styles.css">


</head>
<body>




<div class="container-fluid">
    <div class="header">
        <h1>Reinforcement Learning</h1>
    </div>
    <div class="row content">
        <div class="col-sm-2 sidenav">

            <ul class="nav nav-pills nav-stacked">
                <li class="active"><a href="{{ url_for('index') }}">Home</a></li>

            </ul><br>

        </div>

        <div><h2>Training ....</h2><div id="loading"></div></div>




</div>

<footer class="container-fluid">
    <p>Footer Text</p>
</footer>


</div>
<script>
	//Adapted from : https://stackoverflow.com/questions/6835835/jquery-simple-polling-example
    loading();
    var request = new XMLHttpRequest();
    request.open('GET', '/run');
    // Fire the function on pgae load
    request.onload= function() {
        // Listener for the done message response text
        if (request.status === 200 && request.responseText === 'done') {
            // long process finished successfully, redirect user to success page
            window.location = '/success';
        } else {
            // ops, we got an error from the server
            alert('Something went wrong.');
        }
    };

    request.onerror = function() {
        // ops, we got an error trying to talk to the server
        alert('Something went wrong.');
    };
    // Send the request to the server for the new page
    request.send();
</script>
</body>
</html>